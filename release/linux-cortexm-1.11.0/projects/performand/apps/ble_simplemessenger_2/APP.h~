/*
 * APP.h
 *
 *   Created on: Oct 29, 2013
 *       Author: Rasmus Kolds√∏
 * Organisation: University of Southern Denmark - MCI
 */

#ifndef APP_H_
#define APP_H_

#define APP_STARTUP_EVENT          0x0001
#define APP_SHUTDOWN_EVENT         0x0002
#define APP_DEVICE_INIT_DONE_EVENT 0x0004
#define APP_CONNECTION_ESTABLISHED 0x0008
#define APP_CONNECTION_TERMINATED  0x0010

/********************************************************************
 * long events:                                                     *
 * Structured like following                                        *
 * - bytes  0-15: Event ID                                          *
 * - bytes 16-32: Bitwise Connection ID |= 0x1 << (16 + connHandle) *
 ********************************************************************/

extern int APP_TaskID;

typedef long (*eventHandlerFcn) (int taskID, long *events);

extern long HCI_ProcessEvent (int taskID, long *events);
extern long GATT_ProcessEvent(int taskID, long *events);

extern void APP_Run(void);
extern long APP_ProcessEvent(int taskID, long *events);
extern int  APP_Init(BLE_Central_t *b);
extern int  APP_Exit(void);
extern long APP_SetEvent(int taskID, long events);
extern long APP_GetEvent(int taskID);
extern void APP_ClearEvent(int taskID);


#endif /* APP_H_ */
